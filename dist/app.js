!function(r){var t={};function e(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return r[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=r,e.c=t,e.d=function(r,t,o){e.o(r,t)||Object.defineProperty(r,t,{enumerable:!0,get:o})},e.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},e.t=function(r,t){if(1&t&&(r=e(r)),8&t)return r;if(4&t&&"object"==typeof r&&r&&r.__esModule)return r;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:r}),2&t&&"string"!=typeof r)for(var n in r)e.d(o,n,function(t){return r[t]}.bind(null,n));return o},e.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(t,"a",t),t},e.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},e.p="",e(e.s=0)}([function(r,t){new(function(){function r(){this.running=!0,this.canvas=document.getElementById("game-surface"),this.gl=this.canvas.getContext("webgl"),this.gl||(this.gl=this.canvas.getContext("experimental-webgl")),this.setClearColor(),this.clearScreen(),this.createShaders(),this.createProgram(),this.createBuffer(),this.mainRenderLoop()}return r.prototype.setClearColor=function(){this.gl.clearColor(.75,.85,.8,1)},r.prototype.clearScreen=function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)},r.prototype.createShaders=function(){this.vertexShader=this.addShader(this.vertexShaderSource,this.gl.VERTEX_SHADER),this.fragmentShader=this.addShader(this.fragmentShaderSource,this.gl.FRAGMENT_SHADER)},r.prototype.addShader=function(r,t){var e=this.gl.createShader(t);return this.gl.shaderSource(e,r),this.gl.compileShader(e),this.gl.getShaderParameter(e,this.gl.COMPILE_STATUS)||console.error("Error compiling shader ",this.gl.getShaderInfoLog(e)),e},r.prototype.createProgram=function(){this.program=this.gl.createProgram(),this.gl.attachShader(this.program,this.vertexShader),this.gl.attachShader(this.program,this.fragmentShader),this.gl.linkProgram(this.program),this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)||console.error("Could not link program",this.gl.getProgramInfoLog(this.program)),this.gl.validateProgram(this.program),this.gl.getProgramParameter(this.program,this.gl.VALIDATE_STATUS)||console.error("ERROR invalidating program",this.gl.getProgramInfoLog(this.program))},r.prototype.createBuffer=function(){var r=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,r),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,.5,1,0,0,-.5,-.5,0,1,0,.5,-.5,0,0,1]),this.gl.STATIC_DRAW);var t=this.gl.getAttribLocation(this.program,"vertPosition"),e=this.gl.getAttribLocation(this.program,"vertColor");this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,0),this.gl.vertexAttribPointer(e,3,this.gl.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,2*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(t),this.gl.enableVertexAttribArray(e)},r.prototype.stop=function(){this.running=!1},r.prototype.mainRenderLoop=function(){var r=this,t=function(){r.clearScreen(),r.gl.useProgram(r.program),r.gl.drawArrays(r.gl.TRIANGLES,0,3),r.running&&window.requestAnimationFrame(function(){return t()})};t()},Object.defineProperty(r.prototype,"vertexShaderSource",{get:function(){return"\n        precision mediump float;\n\n        // input\n        attribute vec2 vertPosition;\n        attribute vec3 vertColor;\n\n        // output\n        varying vec3 fragColor;\n\n        void main(){\n            fragColor = vertColor;\n            // 0.0 = z-index, last one always 1\n            gl_Position = vec4(vertPosition, 0.0, 1.0);\n        }\n        "},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"fragmentShaderSource",{get:function(){return"\n        precision mediump float;\n\n        // input\n        varying vec3 fragColor;\n\n        void main(){\n            // only output from fragment shader, color of a specific pixel\n            gl_FragColor = vec4(fragColor, 1.0);\n        }\n\n        "},enumerable:!0,configurable:!0}),r}())}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiQXBwIiwidGhpcyIsInJ1bm5pbmciLCJjYW52YXMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2wiLCJnZXRDb250ZXh0Iiwic2V0Q2xlYXJDb2xvciIsImNsZWFyU2NyZWVuIiwiY3JlYXRlU2hhZGVycyIsImNyZWF0ZVByb2dyYW0iLCJjcmVhdGVCdWZmZXIiLCJtYWluUmVuZGVyTG9vcCIsImNsZWFyQ29sb3IiLCJjbGVhciIsIkNPTE9SX0JVRkZFUl9CSVQiLCJERVBUSF9CVUZGRVJfQklUIiwidmVydGV4U2hhZGVyIiwiYWRkU2hhZGVyIiwidmVydGV4U2hhZGVyU291cmNlIiwiVkVSVEVYX1NIQURFUiIsImZyYWdtZW50U2hhZGVyIiwiZnJhZ21lbnRTaGFkZXJTb3VyY2UiLCJGUkFHTUVOVF9TSEFERVIiLCJzaGFkZXJTb3VyY2UiLCJ0eXBlIiwic2hhZGVyIiwiY3JlYXRlU2hhZGVyIiwiY29tcGlsZVNoYWRlciIsImdldFNoYWRlclBhcmFtZXRlciIsIkNPTVBJTEVfU1RBVFVTIiwiY29uc29sZSIsImVycm9yIiwiZ2V0U2hhZGVySW5mb0xvZyIsInByb2dyYW0iLCJhdHRhY2hTaGFkZXIiLCJsaW5rUHJvZ3JhbSIsImdldFByb2dyYW1QYXJhbWV0ZXIiLCJMSU5LX1NUQVRVUyIsImdldFByb2dyYW1JbmZvTG9nIiwidmFsaWRhdGVQcm9ncmFtIiwiVkFMSURBVEVfU1RBVFVTIiwidHJpYW5nbGVWZXJ0ZXhCdWZmZXIiLCJiaW5kQnVmZmVyIiwiQVJSQVlfQlVGRkVSIiwiYnVmZmVyRGF0YSIsIkZsb2F0MzJBcnJheSIsIlNUQVRJQ19EUkFXIiwicG9zaXRpb25BdHRyaWJ1dGVMb2NhdGlvbiIsImdldEF0dHJpYkxvY2F0aW9uIiwiY29sb3JBdHRyaWJ1dGVMb2NhdGlvbiIsInZlcnRleEF0dHJpYlBvaW50ZXIiLCJGTE9BVCIsIkJZVEVTX1BFUl9FTEVNRU5UIiwiZW5hYmxlVmVydGV4QXR0cmliQXJyYXkiLCJzdG9wIiwiX3RoaXMiLCJsb29wIiwidXNlUHJvZ3JhbSIsImRyYXdBcnJheXMiLCJUUklBTkdMRVMiLCJ3aW5kb3ciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9B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LEVBQUcsR0FFckNKLEVBQUt2RCxTQUNMNEQsT0FBT0Msc0JBQXNCLFdBQU0sT0FBQUwsT0FHM0NBLEtBSUpoRixPQUFBQyxlQUFZcUIsRUFBQUosVUFBQSxxQkFBa0IsS0FBOUIsV0FDSSxNQUFPLG9aQWtCWGxCLE9BQUFDLGVBQVlxQixFQUFBSixVQUFBLHVCQUFvQixLQUFoQyxXQUNJLE1BQU8sd1NBYWZJLEVBcEtBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIlxuXG5jbGFzcyBBcHAge1xuICAgIHByaXZhdGUgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICBwcml2YXRlIGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQ7XG5cbiAgICBwcml2YXRlIHZlcnRleFNoYWRlcjogV2ViR0xTaGFkZXI7XG4gICAgcHJpdmF0ZSBmcmFnbWVudFNoYWRlcjogV2ViR0xTaGFkZXI7XG4gICAgcHJpdmF0ZSBwcm9ncmFtOiBXZWJHTFByb2dyYW07XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdhbWUtc3VyZmFjZVwiKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICAgICAgdGhpcy5nbCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoXCJ3ZWJnbFwiKTtcbiAgICAgICAgaWYgKCF0aGlzLmdsKSB7IC8vIHNvbWUgYnJvd3NlcnNcbiAgICAgICAgICAgIHRoaXMuZ2wgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiZXhwZXJpbWVudGFsLXdlYmdsXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0Q2xlYXJDb2xvcigpO1xuICAgICAgICB0aGlzLmNsZWFyU2NyZWVuKCk7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVTaGFkZXJzKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlUHJvZ3JhbSgpO1xuICAgICAgICB0aGlzLmNyZWF0ZUJ1ZmZlcigpO1xuXG4gICAgICAgIHRoaXMubWFpblJlbmRlckxvb3AoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldENsZWFyQ29sb3IoKSB7XG4gICAgICAgIC8vIHNldHRpbmcgY2xlYXIgY29sb3IgLSBkb2VzIG5vdCB1cGRhdGUgc2NyZWVuIGltbWVkaWF0ZWx5LlxuICAgICAgICB0aGlzLmdsLmNsZWFyQ29sb3IoLjc1LCAuODUsIC44LCAxKTtcblxuICAgIH1cblxuICAgIHByaXZhdGUgY2xlYXJTY3JlZW4oKSB7XG4gICAgICAgIHRoaXMuZ2wuY2xlYXIodGhpcy5nbC5DT0xPUl9CVUZGRVJfQklUIHwgdGhpcy5nbC5ERVBUSF9CVUZGRVJfQklUKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVNoYWRlcnMoKSB7XG5cbiAgICAgICAgdGhpcy52ZXJ0ZXhTaGFkZXIgPSB0aGlzLmFkZFNoYWRlcih0aGlzLnZlcnRleFNoYWRlclNvdXJjZSwgdGhpcy5nbC5WRVJURVhfU0hBREVSKTtcbiAgICAgICAgdGhpcy5mcmFnbWVudFNoYWRlciA9IHRoaXMuYWRkU2hhZGVyKHRoaXMuZnJhZ21lbnRTaGFkZXJTb3VyY2UsIHRoaXMuZ2wuRlJBR01FTlRfU0hBREVSKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZFNoYWRlcihzaGFkZXJTb3VyY2U6IHN0cmluZywgdHlwZTogV2ViR0xSZW5kZXJpbmdDb250ZXh0W1wiRlJBR01FTlRfU0hBREVSXCJdIHwgV2ViR0xSZW5kZXJpbmdDb250ZXh0W1wiVkVSVEVYX1NIQURFUlwiXSkge1xuXG4gICAgICAgIGNvbnN0IHNoYWRlciA9IHRoaXMuZ2wuY3JlYXRlU2hhZGVyKHR5cGUpO1xuICAgICAgICB0aGlzLmdsLnNoYWRlclNvdXJjZShzaGFkZXIsIHNoYWRlclNvdXJjZSk7XG4gICAgICAgIHRoaXMuZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xuXG4gICAgICAgIGlmICghdGhpcy5nbC5nZXRTaGFkZXJQYXJhbWV0ZXIoc2hhZGVyLCB0aGlzLmdsLkNPTVBJTEVfU1RBVFVTKSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNvbXBpbGluZyBzaGFkZXIgXCIsIHRoaXMuZ2wuZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzaGFkZXI7XG4gICAgfVxuXG4gICAgLy8gY3JlYXRlIHByb2dyYW0gZm9yIHRoZSBncmFwaGljcyBwaXBlbGluZVxuICAgIHByaXZhdGUgY3JlYXRlUHJvZ3JhbSgpIHtcbiAgICAgICAgdGhpcy5wcm9ncmFtID0gdGhpcy5nbC5jcmVhdGVQcm9ncmFtKCk7XG4gICAgICAgIHRoaXMuZ2wuYXR0YWNoU2hhZGVyKHRoaXMucHJvZ3JhbSwgdGhpcy52ZXJ0ZXhTaGFkZXIpO1xuICAgICAgICB0aGlzLmdsLmF0dGFjaFNoYWRlcih0aGlzLnByb2dyYW0sIHRoaXMuZnJhZ21lbnRTaGFkZXIpO1xuICAgICAgICB0aGlzLmdsLmxpbmtQcm9ncmFtKHRoaXMucHJvZ3JhbSk7XG5cbiAgICAgICAgaWYgKCF0aGlzLmdsLmdldFByb2dyYW1QYXJhbWV0ZXIodGhpcy5wcm9ncmFtLCB0aGlzLmdsLkxJTktfU1RBVFVTKSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkNvdWxkIG5vdCBsaW5rIHByb2dyYW1cIiwgdGhpcy5nbC5nZXRQcm9ncmFtSW5mb0xvZyh0aGlzLnByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGluIGRlYnVnIG1vZGUgb25seVxuICAgICAgICB0aGlzLmdsLnZhbGlkYXRlUHJvZ3JhbSh0aGlzLnByb2dyYW0pO1xuICAgICAgICBpZiAoIXRoaXMuZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcih0aGlzLnByb2dyYW0sIHRoaXMuZ2wuVkFMSURBVEVfU1RBVFVTKSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVSUk9SIGludmFsaWRhdGluZyBwcm9ncmFtXCIsIHRoaXMuZ2wuZ2V0UHJvZ3JhbUluZm9Mb2codGhpcy5wcm9ncmFtKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUJ1ZmZlcigpIHtcbiAgICAgICAgY29uc3QgdHJpYW5nbGVWZXJ0aWNlczogbnVtYmVyW10gPSBbIC8vIGNvdW50ZXIgY2xvY2t3aXNlIHZlcnRpY2VzXG4gICAgICAgICAgICAvLyB4LHksIFIsIEcsIEJcbiAgICAgICAgICAgIDAsIC41LCAxLCAwLCAwLFxuICAgICAgICAgICAgLSAuNSwgLS41LCAwLCAxLCAwLFxuICAgICAgICAgICAgLjUsIC0uNSwgMCwgMCwgMVxuICAgICAgICBdO1xuICAgICAgICBjb25zdCB0cmlhbmdsZVZlcnRleEJ1ZmZlciA9IHRoaXMuZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgICAgIHRoaXMuZ2wuYmluZEJ1ZmZlcih0aGlzLmdsLkFSUkFZX0JVRkZFUiwgdHJpYW5nbGVWZXJ0ZXhCdWZmZXIpO1xuICAgICAgICB0aGlzLmdsLmJ1ZmZlckRhdGEodGhpcy5nbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkodHJpYW5nbGVWZXJ0aWNlcyksIHRoaXMuZ2wuU1RBVElDX0RSQVcpO1xuXG4gICAgICAgIC8vIGJpbmQgdmVydGljZXMgdG8gdmVydGV4IHNoYWRlciBhdHRyaWJ1dGVcbiAgICAgICAgY29uc3QgcG9zaXRpb25BdHRyaWJ1dGVMb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5wcm9ncmFtLCBcInZlcnRQb3NpdGlvblwiKTtcbiAgICAgICAgY29uc3QgY29sb3JBdHRyaWJ1dGVMb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5wcm9ncmFtLCBcInZlcnRDb2xvclwiKTtcblxuICAgICAgICB0aGlzLmdsLnZlcnRleEF0dHJpYlBvaW50ZXIoXG4gICAgICAgICAgICBwb3NpdGlvbkF0dHJpYnV0ZUxvY2F0aW9uLCAvLyBhdHRyaWJ1dGUgbG9jYXRpb25cbiAgICAgICAgICAgIDIsIC8vIG51bWJlciBvZiBlbGVtZW50cyBpbiBlYWNoIGF0dHJpYnV0ZSxcbiAgICAgICAgICAgIHRoaXMuZ2wuRkxPQVQsIC8vIGF0dHJpYnV0ZSB0eXBlXG4gICAgICAgICAgICBmYWxzZSwgLy8gbm9ybWFsaXplZFxuICAgICAgICAgICAgNSAqIEZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCwgLy8gc2l6ZSBvZiBpbmRpdmlkdWFsIHZlcnRleFxuICAgICAgICAgICAgMCAvLyBvZmZzZXQgZnJvbSBzdGFydFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuZ2wudmVydGV4QXR0cmliUG9pbnRlcihcbiAgICAgICAgICAgIGNvbG9yQXR0cmlidXRlTG9jYXRpb24sIC8vIGF0dHJpYnV0ZSBsb2NhdGlvblxuICAgICAgICAgICAgMywgLy8gbnVtYmVyIG9mIGVsZW1lbnRzIGluIGVhY2ggYXR0cmlidXRlLFxuICAgICAgICAgICAgdGhpcy5nbC5GTE9BVCwgLy8gYXR0cmlidXRlIHR5cGVcbiAgICAgICAgICAgIGZhbHNlLCAvLyBub3JtYWxpemVkXG4gICAgICAgICAgICA1ICogRmxvYXQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5ULCAvLyBzaXplIG9mIGluZGl2aWR1YWwgdmVydGV4XG4gICAgICAgICAgICAyICogRmxvYXQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UIC8vIG9mZnNldCBmcm9tIHN0YXJ0XG4gICAgICAgICk7XG5cblxuICAgICAgICB0aGlzLmdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHBvc2l0aW9uQXR0cmlidXRlTG9jYXRpb24pO1xuICAgICAgICB0aGlzLmdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGNvbG9yQXR0cmlidXRlTG9jYXRpb24pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcnVubmluZzogYm9vbGVhbiA9IHRydWU7XG5cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1haW5SZW5kZXJMb29wKCkge1xuICAgICAgICBjb25zdCBsb29wID0gKCkgPT4ge1xuXG4gICAgICAgICAgICB0aGlzLmNsZWFyU2NyZWVuKCk7XG5cbiAgICAgICAgICAgIHRoaXMuZ2wudXNlUHJvZ3JhbSh0aGlzLnByb2dyYW0pO1xuICAgICAgICAgICAgdGhpcy5nbC5kcmF3QXJyYXlzKHRoaXMuZ2wuVFJJQU5HTEVTLCAwLCAzKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMucnVubmluZykge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gbG9vcCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgbG9vcCgpO1xuICAgIH1cblxuXG4gICAgcHJpdmF0ZSBnZXQgdmVydGV4U2hhZGVyU291cmNlKCkge1xuICAgICAgICByZXR1cm4gYFxuICAgICAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcblxuICAgICAgICAvLyBpbnB1dFxuICAgICAgICBhdHRyaWJ1dGUgdmVjMiB2ZXJ0UG9zaXRpb247XG4gICAgICAgIGF0dHJpYnV0ZSB2ZWMzIHZlcnRDb2xvcjtcblxuICAgICAgICAvLyBvdXRwdXRcbiAgICAgICAgdmFyeWluZyB2ZWMzIGZyYWdDb2xvcjtcblxuICAgICAgICB2b2lkIG1haW4oKXtcbiAgICAgICAgICAgIGZyYWdDb2xvciA9IHZlcnRDb2xvcjtcbiAgICAgICAgICAgIC8vIDAuMCA9IHotaW5kZXgsIGxhc3Qgb25lIGFsd2F5cyAxXG4gICAgICAgICAgICBnbF9Qb3NpdGlvbiA9IHZlYzQodmVydFBvc2l0aW9uLCAwLjAsIDEuMCk7XG4gICAgICAgIH1cbiAgICAgICAgYDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBmcmFnbWVudFNoYWRlclNvdXJjZSgpIHtcbiAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XG5cbiAgICAgICAgLy8gaW5wdXRcbiAgICAgICAgdmFyeWluZyB2ZWMzIGZyYWdDb2xvcjtcblxuICAgICAgICB2b2lkIG1haW4oKXtcbiAgICAgICAgICAgIC8vIG9ubHkgb3V0cHV0IGZyb20gZnJhZ21lbnQgc2hhZGVyLCBjb2xvciBvZiBhIHNwZWNpZmljIHBpeGVsXG4gICAgICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KGZyYWdDb2xvciwgMS4wKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGA7XG4gICAgfVxufVxuXG5uZXcgQXBwKCk7Il0sInNvdXJjZVJvb3QiOiIifQ==